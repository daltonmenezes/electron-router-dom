---
title: Migrando da v1 para a v2
description: Aprenda como migrar do Electron Router DOM v1 para a v2
---

<Steps>
  <Step>Atualizando as depend√™ncias</Step>

  ```shell
  npm i react-router-dom@latest electron-router-dom@latest
  ```

  Lembrando, que, as vers√µes m√≠nimas necess√°rias para o `Electron Router DOM v2` s√£o:
  - electron: **`>=17.0`**
  - react: **`>=18.0`**
  - react-router-dom: **`>=6.22.3`**

  <Step>Criando o arquivo `electron-router-dom.ts`</Step>

  Na pasta `src` do seu projeto, crie uma pasta `lib` e dentro dela o arquivo `electron-router-dom.ts`.
  √â, atrav√©s desse novo arquivo que voc√™ ir√° expor o m√©todo `registerRoute` e o componente `Router` para a sua aplica√ß√£o.

  <br/>

  - O m√©todo <Link href="/docs/api/main/register-route">registerRoute</Link> ser√° usada no `main process` para registrar uma janela como uma rota da aplica√ß√£o.
  - O componente <Link href="/docs/api/renderer/router">Router</Link> ser√° usado no `renderer process` para navegar entre as janelas/rotas da aplica√ß√£o.

  <br/>

  ```typescript title="src/lib/electron-router-dom.ts"
    import { createElectronRouter } from 'electron-router-dom'

    export const { Router, registerRoute } = createElectronRouter({
      port: 4927, // a porta em que o seu servidor React est√° rodando (opcional, porta padr√£o √© 3000)

      types: {
        /**
         * Os ids das janelas da sua aplica√ß√£o, pense nesses ids como os basenames das rotas
         * essa nova forma permitir√° que o intelisense do seu editor te ajude a saber quais ids est√£o dispon√≠veis
         * tanto no main quanto no renderer process
         */
        ids: ['main'],
      },
    })
  ```

  <Step>Atualizando o processo principal</Step>

  ```diff title="src/main/index.ts"
  - import { createFileRoute, createURLRoute } from 'electron-router-dom'
  + import { registerRoute } from '../lib/electron-router-dom'
  ```
  Com a remo√ß√£o das fun√ß√µes `createFileRoute` e `createURLRoute` do pacote `electron-router-dom`, o processo ficou mais simples e intuitivo.
  Agora, voc√™ s√≥ precisa importar a fun√ß√£o `registerRoute` do arquivo `electron-router-dom.ts` que voc√™ criou anteriormente.

  O que antes era feito dessa forma:

  ```ts title="src/main/index.ts"
    const devServerURL = createURLRoute('http://localhost:3000', id)

    const fileRoute = createFileRoute(
      join(__dirname, '../renderer/index.html'),
      id
    )

    process.env.NODE_ENV === 'development'
      ? window.loadURL(devServerURL)
      : window.loadFile(...fileRoute)
  ```
  Agora, ser√° feito dessa:

  ```ts title="src/main/index.ts"
    registerRoute({
      id: 'main',
      browserWindow: window,
      htmlFile: path.join(__dirname, '../renderer/index.html'),
    })
  ```

  Voc√™ n√£o precisa mais se preocupar com a l√≥gica de carregar a URL do servidor de desenvolvimento ou o arquivo HTML da aplica√ß√£o, o `Electron Router DOM` cuidar√° disso para voc√™.

  <Step>Atualizando as importa√ß√µes no processo de renderiza√ß√£o</Step>

  Agora o componente `Route` n√£o √© mais exportado do pacote `electron-router-dom`, mas sim do pacote `react-router-dom`.
  Al√©m de simplificar o uso do `Electron Router DOM`, essa decis√£o ajudar√° a causar menos confus√£o sobre o que dever√° ser importado de cada pacote.

  ```diff title="src/renderer/routes.tsx"
  + import { Route } from 'react-router-dom'

  - import { Router, Route } from 'electron-router-dom'
  + import { Router } from '../lib/electron-router-dom'
  ```
</Steps>

<Alert variant="success">
  <AlertTitle className="text-bold text-lg">
    üéâ Agora voc√™ est√° pronto para usar o `Electron Router DOM v2`
  </AlertTitle>

  <AlertDescription>
    Para extrair o potencial m√°ximo da biblioteca,
    recomendamos que voc√™ leia o restante da documenta√ß√£o ou veja os <Link href="https://github.com/daltonmenezes/electron-router-dom/tree/main/examples">exemplos</Link> existentes!
  </AlertDescription>
</Alert>
